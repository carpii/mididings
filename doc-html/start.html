
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Getting Started &#8212; mididings  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nasophon.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Connections" href="connect.html" />
    <link rel="prev" title="mididings Manual" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="connect.html" title="Connections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="mididings Manual"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mididings  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="getting-started">
<span id="gettingstarted"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h1>
<section id="anatomy-of-a-mididings-script">
<span id="anatomy"></span><h2>Anatomy of a mididings Script<a class="headerlink" href="#anatomy-of-a-mididings-script" title="Permalink to this heading">¶</a></h2>
<p>mididings configuration files are just Python scripts, although some of
Python’s features are used in ways for which they weren’t intended ;)
Technically speaking, mididings is an embedded domain-specific language
based on Python.</p>
<p>The main difference between mididings and regular Python scripts is that
mididings typically uses Python only at startup. Patches consist of Python
objects and nested data structures,
but not actual Python code to be executed once everything is set up.
Internally, patches are converted to C++ objects, and the processing
is done entirely in C++.
It is however possible to call back into Python, if necessary.</p>
<p>Although mididings is a Python module that can theoretically be imported
in other Python applications, it’s really not designed to be used that way.
Think of mididings as a standalone application, that just happens to
use Python as its “user interface”.</p>
</section>
<section id="examples">
<span id="id1"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<p>Let’s start with something very simple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mididings</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">run</span><span class="p">(</span><span class="n">Transpose</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Here the import statement imports everything from the mididings Python module
into the global namespace. The <code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code> function is then used to
execute a simple patch, consisting of just a single <code class="xref py py-func docutils literal notranslate"><span class="pre">Transpose()</span></code> unit.</p>
<p>You can start this script by saving it to a Python file and executing it,
for example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python transpose.py
</pre></div>
</div>
<p>What this script does is to create an ALSA MIDI client with one input and
one output port. It will then start listening for events on the input port,
transpose all incoming note-on and note-off events up by 3 semitones,
and send all events to the output port. Pressing <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">C</kbd></kbd> terminates
the script.</p>
<p>Ok, that was easy. Now let’s try something slightly more complex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mididings</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">config</span><span class="p">(</span>
    <span class="n">backend</span><span class="o">=</span><span class="s1">&#39;jack-rt&#39;</span><span class="p">,</span>
    <span class="n">client_name</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">run</span><span class="p">(</span>
    <span class="n">Velocity</span><span class="p">(</span><span class="n">curve</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="p">[</span>
        <span class="n">Transpose</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
        <span class="n">Filter</span><span class="p">(</span><span class="n">NOTE</span><span class="o">|</span><span class="n">CTRL</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Channel</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The first thing that’s new in this example is the <code class="xref py py-func docutils literal notranslate"><span class="pre">config()</span></code> function.
This function is used to configure some global settings, and should usually
be called only once, at the start of the script. Here, it is used to select
the JACK backend instead of ALSA, and to change the JACK client name from
<code class="docutils literal notranslate"><span class="pre">'mididings'</span></code> to <code class="docutils literal notranslate"><span class="pre">'example'</span></code>.</p>
<p>Now, let’s look at the patch inside the <code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code> function call.
There are four mididings units used in this patch:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Velocity(curve=1.0)</span></code> applies a velocity curve to all note-on events,
increasing their velocity values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Transpose(12)</span></code> transposes all note events up by 12 semitones.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Filter(NOTE|CTRL)</span></code> removes all events that are not note-on, note-off
or CC events.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Channel(3)</span></code> changes the MIDI channel of all events to channel 3.</p></li>
</ul>
<p>Each of these units is quite simple on its own, but what’s important is
how the units are connected to each other:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;&gt;</span> <span class="pre">B</span></code> connects two units in series, so every event output by unit A
is then passed to unit B.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[A,</span> <span class="pre">B,</span> <span class="pre">...]</span></code> (which is just a <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> in Python) connects units
in parallel, so each of these units gets its own copy of incoming events
and processes them individually.</p></li>
</ul>
<p>A graphical representation of the patch above would look something like this:</p>
<img alt="mididings example patch" src="_images/patch.png" />
<p>For incoming note-on, note-off and CC events, this patch will output two
events: one on the original MIDI channel, with notes being transposed by
one octave, and one on channel 3, with no transposition.
All other event types will result in only one event being sent to the
output (on their original channel), because those event types are filtered
out in the lower branch of the patch.</p>
<section id="multiple-scenes">
<h3>Multiple Scenes<a class="headerlink" href="#multiple-scenes" title="Permalink to this heading">¶</a></h3>
<p>Often it’s desirable to run not just a single patch, but many different
ones which can be switched using a MIDI controller.
With mididings it’s possible to switch between an arbitrary number of
“scenes”, each of which consists of one patch, and optionally an
“init-patch” that will be triggered every time you switch to that scene.</p>
<p>Here’s an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mididings</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">run</span><span class="p">(</span>
    <span class="n">scenes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span>  <span class="n">Scene</span><span class="p">(</span><span class="s2">&quot;channel 1 only&quot;</span><span class="p">,</span>
                <span class="n">Channel</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="mi">2</span><span class="p">:</span>  <span class="n">Scene</span><span class="p">(</span><span class="s2">&quot;channel 2, program 23&quot;</span><span class="p">,</span>
                <span class="n">Channel</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                <span class="n">Program</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Channel</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="mi">3</span><span class="p">:</span>  <span class="n">Scene</span><span class="p">(</span><span class="s2">&quot;channel 2, program 42&quot;</span><span class="p">,</span>
                <span class="n">Channel</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                <span class="n">Program</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Channel</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="mi">4</span><span class="p">:</span>  <span class="n">Scene</span><span class="p">(</span><span class="s2">&quot;channel 1/3 split&quot;</span><span class="p">,</span>
                <span class="n">KeySplit</span><span class="p">(</span><span class="s1">&#39;c3&#39;</span><span class="p">,</span>
                    <span class="n">Channel</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                    <span class="n">Channel</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">),</span>
    <span class="p">},</span>
    <span class="n">control</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="n">PROGRAM</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">SceneSwitch</span><span class="p">(),</span>
    <span class="n">pre</span> <span class="o">=</span> <span class="o">~</span><span class="n">Filter</span><span class="p">(</span><span class="n">PROGRAM</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This script defines 4 <em>scenes</em>.
In the first scene, all incoming events are simply routed to output channel 1.
In scenes 2 and 3, events are routed to channel 2. Additionally, when
switching to one of these scenes, MIDI program change messages will be
sent on that channel first.
The fourth scene splits the keyboard at C3 and routes both regions of the
keyboard to different output channels.</p>
<p>The <em>control</em> patch is used to switch between these scenes. The filter
lets only program changes through, which upon reaching the
<code class="xref py py-func docutils literal notranslate"><span class="pre">SceneSwitch()</span></code> then trigger the scene switches.
In this example we assume that incoming program changes are only used for
switching scenes, and should not be processed by the currently active scene.
Therefore the <em>pre</em> patch is used to filter out these events.</p>
<p>This is a complete overview of the event flow when using multiple scenes:</p>
<img alt="mididings event flow" src="_images/eventflow.png" />
<p>The <em>control</em>, <em>pre</em> and <em>post</em> patches as well as any of the init patches
are optional and can be omitted if they are not needed.
The control patch can be used for any event processing that does not depend
on the currently active scene.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of init patches can often be significantly simplified
by embedding them into the regular patches, in particular using the
<code class="xref py py-func docutils literal notranslate"><span class="pre">Output()</span></code> unit and the <code class="xref py py-class docutils literal notranslate"><span class="pre">OutputTemplate</span></code> class.</p>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#anatomy-of-a-mididings-script">Anatomy of a mididings Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multiple-scenes">Multiple Scenes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="connect.html">Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="connect.html#serial-and-parallel">Serial and Parallel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Chain"><code class="docutils literal notranslate"><span class="pre">Chain</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Fork"><code class="docutils literal notranslate"><span class="pre">Fork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Unit.add"><code class="docutils literal notranslate"><span class="pre">Unit.add</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="connect.html#filtering-and-splitting">Filtering and Splitting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Filter"><code class="docutils literal notranslate"><span class="pre">Filter</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Filter.invert"><code class="docutils literal notranslate"><span class="pre">Filter.invert</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Filter.negate"><code class="docutils literal notranslate"><span class="pre">Filter.negate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Split"><code class="docutils literal notranslate"><span class="pre">Split</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="connect.html#selective-processing">Selective Processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Selector.apply"><code class="docutils literal notranslate"><span class="pre">Selector.apply</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#id0"><code class="docutils literal notranslate"><span class="pre">Selector.apply</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.AndSelector"><code class="docutils literal notranslate"><span class="pre">AndSelector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.And"><code class="docutils literal notranslate"><span class="pre">And</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.OrSelector"><code class="docutils literal notranslate"><span class="pre">OrSelector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="connect.html#mididings.Or"><code class="docutils literal notranslate"><span class="pre">Or</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous</a><ul>
<li class="toctree-l2"><a class="reference internal" href="misc.html#event-types">Event Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html#event-attributes">Event Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html#note-names-and-ranges">Note Names and Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html#port-names">Port Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html#mididings-and-python">mididings and Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="main.html">Module <code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="main.html#global-configuration">Global Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="units.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings</span></code> Units</a><ul>
<li class="toctree-l2"><a class="reference internal" href="units.html#filters">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#splits">Splits</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#modifiers">Modifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#generators">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#function-calls">Function Calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#scene-switching">Scene Switching</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extra-units.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings.extra</span></code> Units</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extra-units.html#voicing">Voicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-units.html#splits">Splits</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-units.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-units.html#messaging">Messaging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extra.html">Module <code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings.extra</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="extra.html#hooks">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra.html#general-midi">General MIDI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="event.html">Module <code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings.event</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="engine.html">Module <code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings.engine</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Module <code class="xref py py-mod docutils literal notranslate"><span class="pre">mididings.util</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Command Line Tools and GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tools.html#mididings"><strong class="command">mididings</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#livedings"><strong class="command">livedings</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#send-midi"><strong class="command">send_midi</strong></a></li>
</ul>
</li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">mididings Manual</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="connect.html"
                          title="next chapter">Connections</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="connect.html" title="Connections"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="mididings Manual"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mididings  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2014, Dominic Sacré.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>